CREATE DATABASE user_ratings_and_lists;
USE user_ratings_and_lists;

CREATE TABLE users (
    userId INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(32) UNIQUE,
    password_hash VARCHAR(255) NOT NULL
);

CREATE TABLE userMovies (
	userId INT,
	movieID INT,
    priority FLOAT4 DEFAULT NULL,
    rating FLOAT4 DEFAULT NULL,
	PRIMARY KEY (userId, movieID),
    FOREIGN KEY (userID) REFERENCES users(userID)
);


# Testing

INSERT INTO users (username, password_hash) VALUES ("Wilmer", "123");
SELECT  * FROM users;

INSERT INTO userMovies (userId, movieId, rating) VALUES(1, 4, 3.4);
SELECT * FROM userMovies;
SELECT * FROM userMovies WHERE userId = 1 AND priority IS NULL;